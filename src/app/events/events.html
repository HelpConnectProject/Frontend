<div class="events-container hc-page">
  <h1 class="page-title">Események</h1>
  <div class="ownev">
    <a routerLink="/ownevents" class="ownev-btn">Saját események</a>
  </div>
  <div class="search-section">
    <div class="search-header">
      <h2 class="search-title">Keress eseményeket</h2>
      <p class="search-subtitle">Írd be az esemény nevét, vagy helyszínét</p>
    </div>

    <div class="search-container">
      <form [formGroup]="searchForm" class="search-form">
        <div class="search-input-wrapper">
          <div class="search-input-group">
            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input 
              type="text" 
              formControlName="eventName" 
              placeholder="Esemény neve..." 
              class="search-input"
            />
            <div class="input-highlight"></div>
          </div>

          <div class="search-input-group">
            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <input 
              type="text" 
              formControlName="location" 
              placeholder="Város / helyszín..." 
              class="search-input"
            />
            <div class="input-highlight"></div>
          </div>

          <div class="search-input-group">
            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M3 21h18"></path>
              <path d="M5 21V7l7-4 7 4v14"></path>
              <path d="M9 21v-6h6v6"></path>
            </svg>
            <input
              type="text"
              formControlName="organizationName"
              placeholder="Szervezet neve..."
              class="search-input"
            />
            <div class="input-highlight"></div>
          </div>
        </div>

        <label class="only-registered-toggle">
          <input type="checkbox" formControlName="onlyRegistered" class="only-registered-checkbox" />
          <span class="toggle-slider" aria-hidden="true"></span>
          <span class="toggle-text">Csak a jelentkezett események</span>
        </label>

        <button 
          type="button" 
          (click)="clearFilters()" 
          class="clear-btn"
        >
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="1"></circle>
            <path d="M12 6v6M12 12v6"></path>
          </svg>
          Szűrők törlése
        </button>
      </form>
    </div>
  </div>

  <div class="cards-grid">
    @for (event of filteredEvents; track event.id) {
      <a class="event-card" [class.registered]="isRegistered(event.id)" [routerLink]="['/aboutevent', event.id]">
        <div class="card-header">
          <div class="card-logo-section">
            <div class="card-logo">
              @if (event.image) {
                <img [src]="event.image" [alt]="event.title || 'Event'" />
              } @else {
                <span class="logo-placeholder">{{ (event.title || 'E').substring(0, 2).toUpperCase() }}</span>
              }
            </div>
          </div>
          <div class="card-info-summary">
            <h3 class="card-title">{{ event.title || 'Esemény' }}</h3>
            @if (event.date) {
              <p class="card-date">{{ event.date | date:'yyyy.MM.dd.' }}</p>
            }
          </div>
        </div>
      </a>
    }
  </div>

  @if (!filteredEvents || filteredEvents.length === 0) {
    <div class="empty-state">
      <p>Nincs megjeleníthető esemény a keresési feltételeknek megfelelően.</p>
    </div>
  }
</div>
